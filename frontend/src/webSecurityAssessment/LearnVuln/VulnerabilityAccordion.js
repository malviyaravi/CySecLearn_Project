import React, { useState } from 'react';
import './VulnerabilityAccordion.css';

const VulnerabilityContent = ({ content }) => {
  return (
    <div style={{ textAlign: 'justify' }}>
      {content.map((item, index) => {
        if (item.type === 'paragraph') {
          return <p key={index}>{item.text}</p>;
        } else if (item.type === 'heading') {
          return <h2 key={index} style={{ fontWeight: 'bold', fontSize: '1.5em' }}>{item.text}</h2>;
        } else if (item.type === 'bullet') {
          return <p key={index}>&#8226; {item.text}</p>;
        }
        return null;
      })}
    </div>
  );
};

const VulnerabilityAccordion = ({ title, content, references, images }) => {
  const [isOpen, setIsOpen] = useState(true);

  const toggleAccordion = () => {
    setIsOpen(!isOpen);
  };

  return (
    <div className={`vulnerability-accordion ${isOpen ? 'open' : ''}`} onClick={toggleAccordion}>
      <div className="accordion-header">
        <h2 style={{ fontWeight: 'bold', fontSize: '2em', textAlign: 'center' }}>{title}</h2>
        <span>{isOpen ? '▼' : '▶'}</span>
      </div>
      {isOpen && (
        <div className="accordion-content">
          {images && (
            <div className="accordion-images">
              {images.map((image, index) => (
                <div key={index} className="image-wrapper">
                  <img src={image} alt={`Image ${index + 1}`} />
                </div>
              ))}
            </div>
          )}
          <VulnerabilityContent content={content} />
          <div className="reference-section">
            <h3 style={{ fontWeight: 'bold', fontSize: '1.2em', textAlign: 'center' }}>References</h3>
            <div className="reference-links">
              {references.map((ref, index) => (
                <div key={index} className="reference-link">
                  <a href={ref} target="_blank" rel="noopener noreferrer" style={{ color: 'blue' }}>
                    {ref}
                  </a>
                </div>
              ))}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default VulnerabilityAccordion;


